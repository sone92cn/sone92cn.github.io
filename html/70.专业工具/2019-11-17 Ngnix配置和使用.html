<div class="article">
<p style="text-indent:0em;"><a id="view_head" href="#" onclick="javascript:viewHead($(this));">返回</a></p>
<h1>Ngnix配置和使用</h1>
<h2>一、下载和安装</h2>
<ol>
<li>下载地址：http://nginx.org/en/download.html</li>
<li>安装启动： 下载后解压至任意目录，运行“nginx.exe”启动</li>
<li>如果“http://localhost/”能正常访问，表示正常启动</li>
<li>服务关闭：nginx -s stop(快速停止nginx)；nginx -s quit(完整有序的停止nginx)</li>
</ol>
<h2>二、Ngnix配置文件</h2>
<ol>
<li>配置文件：nginx的配置文件是conf目录下的nginx.conf</li>
<li>启用配置：修改了nginx的配置文件nginx.conf 时，执行 nginx -s reload 可让改动生效</li>
</ol>
<h2>三、Ngnix负载均衡</h2>
<p><img alt="" src="/img/assets/nginx-1.png" /></p>
<h2>四、Nginx静态资源</h2>
<p><img alt="" src="/img/assets/nginx-2.png" /></p>
<h2>五、匹配模式及顺序</h2>
<pre><code>location = /uri 　　　表示精确匹配，只有完全匹配上才能生效  
location ^~ /uri 　　 对URL路径进行前缀匹配，并且在正则之前  
location ~ pattern 　 表示区分大小写的正则匹配  
location ~* pattern 　表示不区分大小写的正则匹配  
location /uri 　　　　也表示前缀匹配，但是在正则匹配之后  
location / 　　　　　  通用匹配，相当于default
</code></pre>
<h2>六、root与alias</h2>
<ol>
<li>root: 表示跟目录，文件名包含完整url，可以不以/结尾</li>
<li>alias:  资源所在目录，文件名不包含完整url，必须以/结尾</li>
</ol>
<h2>七、根据GET参数转发</h2>
<pre><code>if ($arg_server_id = "3"){
    proxy_pass    http://tornado_server3;
    break;
}
</code></pre>
<h2>八、Nginx常用启动参数</h2>
<ul>
<li>--prefix= 指向安装目录</li>
<li>--sbin-path= 指向（执行）程序文件（nginx）</li>
<li>--conf-path= 指向配置文件（nginx.conf）</li>
<li>--error-log-path= 指向错误日志目录</li>
<li>--pid-path= 指向pid文件（nginx.pid）</li>
<li>--lock-path= 指向lock文件（nginx.lock）（安装文件锁定，防止安装文件被别人利用，或自己误操作。）</li>
<li>--user= 指定程序运行时的非特权用户</li>
<li>--group= 指定程序运行时的非特权用户组</li>
<li>--builddir= 指向编译目录</li>
<li>--with-openssl= 指向openssl安装目录</li>
<li>--with-openssl-opt= 在编译时为openssl设置附加参数</li>
<li>--with-debug= 启用debug日志</li>
</ul>
<p class="text-right">最后更新时间：2020-04-27 14:49:42</p></div>